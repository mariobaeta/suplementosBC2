const LOCAL_STORAGE_WISHLIST_KEY="zmz-shopify-wishlist",LOCAL_STORAGE_SEPARATOR=",",BUTTON_ACTIVE_CLASS="active",TEMPLATE_LOADED_CLASS="loaded",selectors={button:"[btn-wishlist-js]",template:"[template-wishlist-js]",itemProduct:".js-product-thumbnail, .product-scope",wishlistCounter:".zemez_wishlist_total"};document.addEventListener("DOMContentLoaded",()=>{initBtnWishlist(),initTemplate(),initCounter()}),document.addEventListener("zmz-shopify-wishlist:updated",event=>{initTemplate(),initCounter()});const fetchItemProductHTML=handle=>{const productTileTemplateUrl=`/products/${handle}?view=card`;return fetch(productTileTemplateUrl).then(res=>res.text()).then(res=>{const text=res;return new DOMParser().parseFromString(text,"text/html").documentElement.querySelector(selectors.itemProduct).outerHTML}).catch(err=>console.error(`[Shopify Wishlist] Failed to load content for handle: ${handle}`,err))},setTemplate=async template=>{const wishlist=getWishlist(),requests=wishlist.map(fetchItemProductHTML),wishlistItemProducts=(await Promise.all(requests)).join("");template.innerHTML=wishlistItemProducts,template.classList.add(TEMPLATE_LOADED_CLASS),initBtnWishlist(),updActiveCompare();const event=new CustomEvent("zmz-shopify-wishlist:init-product-template",{detail:{wishlist}});document.dispatchEvent(event)},setBtnWishlist=buttons=>{buttons.forEach(button=>{const productHandle=button.dataset.productHandle||!1;if(!productHandle)return console.error("[Shopify Wishlist] Missing `data-product-handle` attribute. Failed to update the wishlist.");wishlistContains(productHandle)&&button.classList.add(BUTTON_ACTIVE_CLASS),button.addEventListener("click",()=>{updWishlist(productHandle),button.classList.toggle(BUTTON_ACTIVE_CLASS)})})},setCounter=counters=>{const wishlist=getWishlist();counters.forEach(counter=>{wishlist.length>=1?counter.innerHTML="("+wishlist.length+")":counter.innerHTML=""})},initTemplate=()=>{const template=document.querySelector(selectors.template)||!1;template&&setTemplate(template)},initBtnWishlist=()=>{const buttons=document.querySelectorAll(selectors.button)||[];if(buttons.length)setBtnWishlist(buttons);else return;const event=new CustomEvent("zmz-shopify-wishlist:init-buttons",{detail:{wishlist:getWishlist()}});document.dispatchEvent(event)},initCounter=()=>{const counters=document.querySelectorAll(selectors.wishlistCounter)||[];counters.length&&setCounter(counters)},getWishlist=()=>{const wishlist=localStorage.getItem(LOCAL_STORAGE_WISHLIST_KEY)||!1;return wishlist?wishlist.split(LOCAL_STORAGE_SEPARATOR):[]},setWishlist=array=>{const wishlist=array.join(LOCAL_STORAGE_SEPARATOR);array.length?localStorage.setItem(LOCAL_STORAGE_WISHLIST_KEY,wishlist):localStorage.removeItem(LOCAL_STORAGE_WISHLIST_KEY);const event=new CustomEvent("zmz-shopify-wishlist:updated",{detail:{wishlist:array}});return document.dispatchEvent(event),wishlist},updWishlist=handle=>{const wishlist=getWishlist(),idxItemList=wishlist.indexOf(handle);return idxItemList===-1?wishlist.push(handle):wishlist.splice(idxItemList,1),setWishlist(wishlist)},wishlistContains=handle=>getWishlist().includes(handle),resetWishlist=()=>setWishlist([]),updActiveCompare=()=>{(productCompare=!1)||initBtnCompare()};
//# sourceMappingURL=/cdn/shop/t/3/assets/wishlist.js.map?v=21987582863689547041671783128
